{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/dahn/holodeck/imports/ui/App.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions",["flow",{}],"nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}]],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"sourceFileName":"/home/dahn/holodeck/imports/ui/App.vue","filename":"/home/dahn/holodeck/imports/ui/App.vue","passPerPreset":false,"envName":"development","cwd":"/home/dahn/holodeck","root":"/home/dahn/holodeck","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.7.6","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/dahn/holodeck/imports/ui/App.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/dahn/holodeck/imports/ui/App.vue"}},"code":"var MtNavigation;\nmodule.link(\"./components/MtNavigation.vue\", {\n  \"default\": function (v) {\n    MtNavigation = v;\n  }\n}, 0);\nmodule.exportDefault({\n  components: {\n    MtNavigation: MtNavigation\n  },\n  data: function () {\n    return {\n      session: {\n        //drawer: true,\n        mode: \"home\",\n        books: {//bookId: \"none\",\n          //currentPage: 1,\n        },\n        currentBook: null,\n        settings: {\n          pre: -1,\n          post: 0,\n          debug: true\n        },\n        tocLevel: 4,\n        saveSession: true,\n        pinboard: [],\n        evaluated: new Set(),\n        sidebar: true,\n        set: function (item, newValue) {\n          var by = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"anonymous\";\n          if (this.debug) console.log(\"Session setting\", item, \"to\", newValue, \"by\", by);\n          this[item] = newValue;\n        },\n        clear: function (dbid) {\n          this.mode = \"home\";\n          this.settings = {\n            pre: -1,\n            post: 0,\n            debug: true\n          };\n          this.tocLevel = 4;\n          this.books = {};\n          this.currentBook = dbid;\n          this.books[dbid] = 1;\n          this.saveSession = true;\n          this.pinboard = [];\n          this.sidebar = true;\n          this.evaluated = new Set();\n        },\n        currentPage: function () {\n          if (this.currentBook && this.books[this.currentBook]) {\n            return this.books[this.currentBook];\n          } else return 0;\n        },\n        setCurrentPage: function (n) {\n          if (this.currentBook) {\n            this.books[this.currentBook] = n;\n          }\n        }\n      },\n      homeMenuItems: [\"Home\", \"Library\", \"Settings\"]\n    };\n  },\n  mounted: function () {\n    this.resumeSession();\n  },\n  watch: {},\n  methods: {\n    resumeSession: function () {\n      var savedSession = localStorage.getItem(\"mtHolodeckSession\");\n\n      if (savedSession) {\n        this.session.set(\"saveSession\", false);\n        this.session.mode = \"book\";\n        var newSession = JSON.parse(savedSession);\n\n        for (var _i = 0, _Object$keys = Object.keys(newSession); _i < _Object$keys.length; _i++) {\n          var k = _Object$keys[_i];\n          if (k != \"debug\" && k != \"mode\" && k != \"saveSession\" && k != \"evaluated\") this.session.set(k, newSession[k], \"Book resume\");\n        }\n\n        this.session.saveSession = true;\n        var cp = this.session.currentPage;\n\n        if (cp) {\n          this.$router.push('/read/' + this.session.currentBook + '/' + cp.toString());\n        } else {\n          this.session.currentBook == null;\n          this.$router.push('/');\n        }\n      } else {\n        alert(\"No session yet\");\n      }\n    }\n  },\n  computed: {\n    sessionString: function () {\n      return JSON.stringify(this.session);\n    }\n  },\n  meteor: {\n    $subscribe: {\n      Users: [],\n      AllItems: []\n    }\n  },\n  watch: {\n    sessionString: function (newSessionString) {\n      if (this.session.saveSession) {\n        localStorage.setItem(\"mtHolodeckSession\", newSessionString);\n      }\n    }\n  }\n});","map":{"version":3,"sources":["/home/dahn/holodeck/imports/ui/App.vue"],"names":["MtNavigation","module","link","v","exportDefault","components","data","session","mode","books","currentBook","settings","pre","post","debug","tocLevel","saveSession","pinboard","evaluated","Set","sidebar","set","item","newValue","by","console","log","clear","dbid","currentPage","setCurrentPage","n","homeMenuItems","mounted","resumeSession","watch","methods","savedSession","localStorage","getItem","newSession","JSON","parse","Object","keys","k","cp","$router","push","toString","alert","computed","sessionString","stringify","meteor","$subscribe","Users","AllItems","newSessionString","setItem"],"mappings":"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","sourcesContent":["\nimport MtNavigation from './components/MtNavigation.vue';\nexport default {\n  components: { MtNavigation },\n  data() {\n    return {\n      session: {\n        //drawer: true,\n        mode: \"home\",\n        books: {\n          //bookId: \"none\",\n          //currentPage: 1,\n        },\n        currentBook: null,\n        settings: {\n          pre: -1,\n          post: 0,\n          debug: true,\n        },\n        tocLevel: 4,\n        saveSession: true,\n        pinboard: [],\n        evaluated: new Set(),\n        sidebar: true,\n        set(item, newValue, by = \"anonymous\") {\n          if (this.debug)\n            console.log(\"Session setting\", item, \"to\", newValue, \"by\", by);\n          this[item] = newValue;\n        },\n        clear(dbid) {\n          this.mode = \"home\";\n          this.settings = {\n            pre: -1,\n            post: 0,\n            debug: true,\n          };\n          this.tocLevel=4;\n          this.books = {};\n          this.currentBook = dbid;\n          this.books[dbid] = 1;\n          this.saveSession = true;\n          this.pinboard = [];\n          this.sidebar = true;\n          this.evaluated = new Set();\n        },\n        currentPage() {\n          if (this.currentBook && this.books[this.currentBook]) {\n            return this.books[this.currentBook];\n          } else return 0;\n        },\n        setCurrentPage(n) {\n          if (this.currentBook) {\n            this.books[this.currentBook] = n;\n          }\n        },\n      },\n      homeMenuItems: [\"Home\", \"Library\", \"Settings\"],\n    };\n  },\n  mounted() {\n    this.resumeSession();\n  },\n  watch: {},\n  methods: {\n    resumeSession() {\n      let savedSession = localStorage.getItem(\"mtHolodeckSession\");\n      if (savedSession) {\n        this.session.set(\"saveSession\", false);\n        this.session.mode = \"book\";\n        let newSession = JSON.parse(savedSession);\n        for (let k of Object.keys(newSession)) {\n          if (\n            k != \"debug\" &&\n            k != \"mode\" &&\n            k != \"saveSession\" &&\n            k != \"evaluated\"\n          )\n            this.session.set(k, newSession[k], \"Book resume\");\n        }\n        this.session.saveSession = true;\n        let cp = this.session.currentPage;\n        if (cp) {\n          this.$router.push('/read/'+this.session.currentBook+'/'+cp.toString());\n        } else {\n          this.session.currentBook == null;\n          this.$router.push('/');\n        }\n      } else {\n        alert(\"No session yet\");\n      }\n    },\n  },\n  computed: {\n    sessionString() {\n      return JSON.stringify(this.session);\n    },\n  },\n  meteor: {\n    $subscribe: {\n      Users: [],\n      AllItems: [],\n    },\n  },\n  watch: {\n    sessionString(newSessionString) {\n      if (this.session.saveSession) {\n        localStorage.setItem(\"mtHolodeckSession\", newSessionString);\n      }\n    },\n  },\n};\n"]},"sourceType":"module","hash":"67d273a1cab8cedf67f7c6f3a1bc14a152e6ac90"}
